# 推送消息

推送消息是一种常用的运营方法。在合适的时间把合适的内容通过合适的方式推送给合适的人群，不仅能促进用户活跃，也能极大提升用户对产品的体验。

**常用的推送消息方式包括：**
1. 消息通知（已支持）
1. 邮件（已支持）
1. 短信（计划中）

易观方舟本身不直接去推送，但支持第三方推送服务商的接入，在方舟中圈定目标群体，编辑推送内容，通过第三方服务商发送，将用户行为分析的过程和触达过程有效结合，同时不打破企业使用既有推送服务的习惯。

**目前接入的服务商：**

**消息通知：** 极光推送、个推、百度推送、小米推送；

**邮件：** SendCloud


## 推送消息的使用场景

1. 某旅游APP，检测到用户不在常住地，立即推送当地吃喝玩乐攻略？
2. 北京天气骤降，早上发出推送消息贴心提示用户加衣保暖？
3. 乘坐的航班即将到站，及时推送消息提示用户把握好时间？
4. 618大促，用户关注的店铺上新有活动，提醒用户去关注？

     ……
 
## 使用前准备

### 1. 消息通知

消息通知目前适用于Android和iOS应用，需要准备如下：

**Step1. 在推送平台注册帐号，并集成相应SDK** 

若您之前已经在使用相关推送平台，则跳过该步骤；

**Step2. 集成易观方舟SDK**

集成后在 App 初始化过程中获取设备推送ID，并保存在方舟分析的用户信息中

具体方法详见：

- Android应用：《[Android SDK 使用说明](http://ark.analysys.cn/docs/manual/sdk_android.html)》中 *5.7 消息推送* 部分

- iOS应用：《[iOS SDK 使用说明](http://ark.analysys.cn/docs/manual/sdk_ios.html)》中 *4.7 消息推送* 部分

**Step3. 在方舟中进行推送配置，绑定服务**

进入**管理-推送配置** 页面，选择相应的推送平台，输入推送平台的**AppKey** 和 **masterSecret** ，点击绑定即可。

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041324055844.png)



### 2. 邮件
邮件适用于所有有帐号体系的平台，需要准备如下：

**Step1. 集成方舟SDK**

发送邮件时需要用户的邮箱，所以需要通过方舟SDK 设置获取用户邮箱

具体方法详见：

- Android应用：《[Android SDK 使用说明](http://ark.analysys.cn/docs/manual/sdk_android.html)》中 *5.4 采集用户登录退出信息* 部分

- iOS应用：《[iOS SDK 使用说明](http://ark.analysys.cn/docs/manual/sdk_ios.html)》中 *4.3 采集用户登录/退出信息* 部分

- H5/Web应用：《[JS SDK使用说明](http://ark.analysys.cn/docs/manual/sdk_js.html)》中 *3 重要API接口说明* 部分

- 小程序：《[小程序SDK 使用说明](http://ark.analysys.cn/docs/manual/sdk_wx.html)》中 *3 重要API接口说明* 部分

**Step2. 在方舟中进行推送配置，绑定服务**

进入**管理-推送配置** 中，选择电子邮件配置，输入 **accessKey** 和 **secretKey** 进行绑定。

 
## 功能介绍

移入导航 **运营** 模块，选择进入 **推送消息** 页面

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041356201727.png)

点击右上角 **立即创建**，进入创建页面

### 1. 创建推送消息

#### 1.1 创建消息通知

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041410522342.png)


**A. 创建消息内容**

在A区域中输入通知的内容，可以在左侧F区域实时预览效果

支持插入用户属性推送个性化的消息

e.g. 发送消息通知：
> 亲爱的用户您好，您的邮箱存在分险，请重新登录后验证${Email}

如果小明的邮箱是xiaoming@163.com，则收到如下通知：
> 亲爱的用户您好，您的邮箱存在分险，请重新登录后验证xiaoming@163.com


![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041437176509.png)

如果需要使用用户属性，需要在SDK中上传，详见《[SDK指南](http://ark.analysys.cn/docs/manual/sdk.html)》。


**B. 定义后续操作**

默认用户点击消息通知的后续动作是打开APP，但也支持开发者自定义。

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041432217171.png)


**C. 选择推送人群**

下拉选择推送用户群，显示所选目标人群对应的用户数，对所选人群进行定向推送；

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041432212783.png)


**D. 设置推送时间**

发送时间有三种类型：

- **立即推送**，确认发送即时生效
- **计划单次**，定时发送
- **计划重复**，以日/周/月的周期重复发送，可以设置结束时间

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041432216867.png)

**E. 预览并命名消息**

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041438075205.png)

**F. 发送**

预览正确后即可点击发送；

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041440038954.png)

当同一帐号下有多个应用，想要推送相同的消息时，可以直接复制消息内容到不同的应用

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041444162329.png)

#### 1.2 创建邮件通知

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041601343731.png)

**A. 编辑邮件内容**

系统预置了三种邮件模块，可以选择其中一项进行编辑，若所列模板不符合要编辑的内容，可以选择空白模板

支持富文本编辑，可以插入个性化属性，同消息推送

> 注：消息名称用于标注当前推送活动的名称，非用户收到的邮件名称

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041535350716.gif)


**B. 填写邮件标题相关信息**

包括四项：
- 发件人电子邮件（必填）
- 发件人姓名，指收件人可见的发件人名称
- 回复电子邮件，指收件人可见的回复邮箱
- 电子邮件标题（必填），指收件人看到的的邮件标题


**C. 选择推送人群**

下拉选择推送用户群，同消息通知。


**D. 设置推送时间**

发送时间同样有三种类型，同消息通知。

**E. 发送**

确认正确后即可点击发送。

### 2. 推送消息列表

所有已创建的消息会显示在列表中

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041623123179.png)


支持操作包括：

A. 通过关键字快速搜索

B. 通过时间段过滤

C. 编辑草稿消息

D. 删除消息

E. 查看发送效果

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041630500383.png)

## 效果分析

每一次消息通知或者邮件推送都是一次活动，可以在消息详情中，查看达到效果，在不同的分析模型中查看其最终的转化效果

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041640478726.png)


活动名称和消息类型可以作为维度来细分对比不同的活动效果

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041640477791.png)


也可以作为条件，筛选某一次活动的效果

![image](http://imguserradar.analysys.cn/fangzhou/img/2018/04/201804041642586728.png)


## 常见问题

### Q1. 易观方舟负责推送吗？到达率在什么水平？

易观方舟关注的是如何将第三方的推送服务和方舟的分析结合，使得分析得以通过触达落地，从中起到的是连接作用。您可以在方舟中创建推送的内容，但是推送消息本身通过第三方的推送平台来实现，到达率也取决于各个推送平台。

### Q2. 是否还需要单独购买第三方服务？
取决于第三方推送平台是否收费。若其免费，则需在第三方推送服务平台上注册账号、添加应用，获取相应的AppKey等，集成推送SDK，并在方舟的 **管理-推送配置** 中完成绑定。


### Q3. 支持同时使用多家推送服务？
目前仅支持选择其中的一家推送服务，后续会支持多家服务融合使用。
 
### Q4. 可以接入自建的推送平台吗？怎么操作？
目前不支持，已列入计划。
 

### Q5. 正在使用的推送服务没有出现在支持列表中，怎么办？
请致电 **4006-010-231** 与我们联系。
 
### Q6. 方舟的推送分析和极光等推送平台的的统计功能有何不同？
推送平台擅长的是消息推送的技术本身，方舟擅长的是用户精细化运营，包括行为分析-细分用户群-第三方数据补充支持决策-运营触达到再次回到分析，触达的手段也不局限于推送消息本身，所以二者有本质的差异。

 
更多使用场景期待您的挖掘，如有更多有关问题，请随时联系我们 **4006-010-231**。