# SDK 集成问题

主要介绍方舟 SDK 集成中的常见问题以及特殊客户自研 SDK 的注意事项。若不包含您遇到的情况，可以申请加入易观开发者 QQ 交流群：**474086078**。描述清楚现象，会有技术同学协助定位问题并帮助解决。

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/09/201809281405302307.png)

## 易观方舟 SDK 集成问题

主要说明 SDK 集成前、集成中以及集成后常见的一些问题。

### 集成前

#### Q1. 易观方舟目前支持哪些平台？

支持 Android、iOS、JS 和微信小程序平台的应用，详见 [SDK 指南](../integration/sdk/)。

#### Q2. 不同平台的应用是否可以集成到一个项目中，使用一个 AppKey ？

方舟本身支持，但是否需要集成到要给项目中，需要根据不同的业务需要来决定，可以参考[《分平台上报数据 vs 跨平台打通》](../integration/prepare/cross-platform.md)

#### Q3. 易观方舟当前支持哪种埋点方式？代码埋点和无埋点有什么区别？

方舟支持客户端埋点、服务埋点、工具导入全端数据接入，其中客户端埋点，支持代码埋点和可视化埋点两种方式，更多可参考博客[埋点系列文章](https://ark.analysys.cn/blog/%E4%B8%BA%E4%BA%86%E8%AE%B2%E6%98%8E%E7%99%BD%E5%9F%8B%E7%82%B9%E7%9A%84%E6%BC%94%E5%8F%98%E5%8F%B2%EF%BC%8C%E8%BF%99%E5%B8%AE%E6%8A%80%E6%9C%AF%E7%94%B7%E7%8C%AE%E5%87%BA%E5%B9%B4-2)。

#### Q4. 从集成到看到回数通常需要多长时间？

调试阶段，开启 Debug 模式可以实时查看回传数据。

应用正式发布后，关闭 Debug 模式，数据会在应用打开关闭时上传，数据结果会实时展现，在事件分析中可以按分钟、按小时查看，最多延迟 10 分钟；按日汇总当天数据，最多会延迟 2 个小时。

#### Q5. 是否支持 Hydrid 应用的监测？Hydrid APP 中 H5 页面的数据会统计在 APP 里还是网页里？

支持。

APP 内嵌 H5，需要在相应的 H5 页面埋点，数据会同样通过 SDK 上传，计入到 APP 的行为数据中。

#### Q6. Debug 模式有什么作用？

Debug 模式下，SDK 会记录很多调试信息，日志会实时上传，更方便验证集成的正确性。

Debug 模式： 0：表示关闭 Debug 模式 1：表示打开 Debug 模式，但该模式下发送的数据仅用于调试，不计入平台数据统计 2：表示打开 Debug 模式，该模式下发送的数据可计入平台数据统计

#### Q7. SDK 数据上传机制是什么样的？

无论 Debug 和非 Debug 模式，都是实时上传。

#### Q8. 易观方舟的 SDK 有多大？

**Android SDK** ≈280KB

**iOS SDK** ≈10M

#### Q9. 集成后 SDK 后会造成应用缓慢，影响用户体验吗？

不会。

#### Q10. 测试数据是否可以清除呢？

目前不支持单独的清除测试数据，但是可以通过新建测试应用，来验证集成过程，在正式发布之前，新建的正式应用，替换相应的 AppKey 即可。

### 集成中

#### Q1. SDK 应用在什么位置初始化？

应用的启动类的入口函数

> 注意：不可以在应用的子线程中调用（SDK 已经优化线程处理方式）

#### 

### 集成后

#### Q1. 集成后怎么样验证集成是否正确？

方舟实时日志模块正在开发中，当前可以通过事件分析或者分群模块根据条件选定测试的设备，查看设备上的用户行为序列。

## 自研 SDK 注意事项

若客户对前端接入第三方 SDK 有严格限制和顾虑，SDK 可自研，但自研需要注意以下几项：

### 1. 数据模型需保持一致

易观方舟包括数据采集、接收、处理、查询等模块，这些模块通过易观的 Common Data 数据模型一以贯之。若 SDK 自研，需对方舟分析平台的数据模型、数据链路有较深刻的认知，以便适配后续的方舟其他模块的升级。否则，可能导致处理和分析模块不可用。

### 2. 需处理 SDK 与数据采集模块的接收端服务器的交互

处理交互原因：设备终端通过 SDK 采集并上报数据时，服务端会根据各种情况（如设备终端网络不佳、服务端数据压力大等），进行策略调整，并发送至终端，SDK 据此快速响应。 策略如:上行数据频率策略，失败重试策略，缓存数目策略，限制策略等

### 3. 需验证上报数据的合法性

数据采集时 SDK 上报的数据，须符合约定，否则服务器会将进行丢弃。 约定主要是基于字段和模型的校验，需根据方舟版本迭代。

### 4. 需确保兼容和适配众多的机型和版本

SDK 数据采集需要适配兼容众多机型和版本，故而研发成本较高，周期较长，需要持续投入，会严重拖慢公司数字化建设周期。

### 5. 可视化埋点功能需要与方舟采集服务器交互

方舟 SDK 实现了可视化埋点，可视化埋点的配置数据要实时从服务端获取。SDK 上报数据时，数据采集依赖配置文件和方舟数据模型。

